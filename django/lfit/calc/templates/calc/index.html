{% extends 'calc/layout.html' %}
{% load humanize %}
{% block title %}商品検索{% endblock %}

{% block content %}
<h1>商品検索</h1>
{% include 'calc/nav.html' %}
<form action="{% url 'calc:index' %}" method="POST">
    {% csrf_token %}
    <div class="row" style="margin-bottom: 1em;">
        {% for item in form %}
        {% if item.field.widget.input_type == 'radio' %}
        <div class="col">
            {{ item }}
        </div>
        {% else %}
        <div class="col">
            <label for="{{ item.id_for_label }}" class="form-label">{{ item.label }}</label>
            <input type="{{ item.field.widget.input_type }}" class="form-control" id="{{ item.id_for_label }}"
                name="{{ item.name }}" {% if item.value %}value="{{ item.value }}" {% endif %}>
            {{ item.errors }}
        </div>
        {% endif %}
        {% endfor %}    
    </div>
    <input type="submit" class="btn btn-primary" value="検索">
</form>

{% if items %}
<h2 style="margin-top: 2em;">検索結果</h2>
<table class="table">
    <thead>
        <tr>
            <th>商品コード</th>
            <th>品名</th>
            <th>単価</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td><a href="{% url 'calc:line' item.id %}">{{ item.code }}</a></td>
            <td>{{ item.name }}</td>
            <td>{{ item.price|intcomma }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}